import React from 'react';
import ProgressiveImage from 'react-progressive-graceful-image';

import { EMPTY } from 'config/emty';
import { Colors } from '@/config/colors';

type Prop = {
  id: string;
  url: string;
  width?: string | number;
  height?: string | number;
  color: Colors | string;
  onClick?: () => void;
};

export const ArcanaAura: React.FC<Prop> = ({
  id,
  color,
  url,
  width = 250,
  height = 250,
  onClick = () => null
}) => {
  const [loadError, setLoadError] = React.useState(false);

  return (
    <svg
      width={width}
      height={height}
      viewBox="0 0 277 276"
      fill="none"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M115.805 2.90285C95.074 6.40031 75.9252 14.5536 59.4708 26.25C60.7712 34.8938 58.0939 44.0204 51.4387 50.6756C44.7835 57.3308 35.6569 60.0082 27.0131 58.7077C15.3168 75.1621 7.16363 94.3109 3.66622 115.041C10.7035 120.233 15.2681 128.583 15.2681 138C15.2681 147.416 10.7034 155.766 3.66612 160.958C7.16347 181.689 15.3166 200.837 27.0129 217.292C35.6567 215.991 44.7835 218.669 51.4387 225.324C58.0939 231.979 60.7713 241.106 59.4707 249.75C75.9251 261.446 95.0739 269.6 115.804 273.097C120.996 266.06 129.347 261.495 138.763 261.495C148.18 261.495 156.53 266.06 161.722 273.097C182.452 269.6 201.601 261.447 218.055 249.751C216.754 241.107 219.431 231.979 226.087 225.324C232.742 218.668 241.87 215.991 250.514 217.292C262.21 200.838 270.363 181.689 273.86 160.959C266.823 155.767 262.258 147.416 262.258 138C262.258 128.583 266.823 120.233 273.86 115.041C270.363 94.3106 262.21 75.162 250.514 58.7078C241.869 60.0087 232.742 57.3314 226.087 50.6759C219.431 44.0204 216.754 34.8933 218.055 26.2492C201.6 14.5531 182.452 6.40012 161.722 2.90278C156.53 9.94021 148.18 14.505 138.763 14.505C129.347 14.505 120.996 9.94024 115.805 2.90285ZM138.763 251.72C75.9574 251.72 25.0432 200.806 25.0432 138C25.0432 75.194 75.9574 24.2798 138.763 24.2798C201.569 24.2798 252.483 75.194 252.483 138C252.483 200.806 201.569 251.72 138.763 251.72Z"
        stroke={color}
        strokeWidth="2"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M130.697 1.20361C109.709 2.41604 89.7839 8.42918 72.1504 18.2585C72.4991 26.9926 68.841 35.7723 61.4987 41.6609C54.1565 47.5494 44.792 49.214 36.342 46.9772C22.9186 62.0558 12.7228 80.1995 6.98224 100.424C13.4104 106.353 17.0358 115.152 16.0073 124.512C14.9789 133.872 9.52955 141.674 1.96729 146.066C3.17962 167.055 9.19266 186.979 19.0219 204.613C27.756 204.264 36.5358 207.922 42.4243 215.264C48.3129 222.607 49.9775 231.971 47.7406 240.421C62.8192 253.845 80.9629 264.041 101.187 269.781C107.117 263.353 115.916 259.728 125.276 260.756C134.636 261.784 142.438 267.234 146.83 274.796C167.818 273.584 187.743 267.571 205.376 257.742C205.027 249.008 208.685 240.227 216.028 234.339C223.37 228.45 232.735 226.785 241.186 229.022C254.609 213.944 264.805 195.8 270.545 175.576C264.117 169.647 260.491 160.848 261.52 151.487C262.548 142.127 267.998 134.325 275.56 129.933C274.348 108.945 268.335 89.0204 258.505 71.3871C249.771 71.7362 240.991 68.078 235.102 60.7355C229.213 53.3929 227.549 44.028 229.786 35.5777C214.707 22.1545 196.564 11.9589 176.34 6.21845C170.41 12.6467 161.611 16.2722 152.251 15.2438C142.891 14.2154 135.089 8.76595 130.697 1.20361ZM126.344 251.04C63.9135 244.181 18.8644 188.01 25.7238 125.58C32.5832 63.1498 88.7536 18.1007 151.184 24.9601C213.614 31.8195 258.663 87.9899 251.804 150.42C244.944 212.85 188.774 257.899 126.344 251.04Z"
        stroke={color}
        strokeWidth="2"
      />
      <circle
        cx="138"
        cy="138"
        r="116"
        fill={Colors.Black}
      />
      <circle
        cx="138"
        cy="138"
        r="116"
        fill={`url(#pattern-${id})`}
        onClick={onClick}
      />
      <defs>
        <pattern
          id={`pattern-${id}`}
          patternContentUnits="objectBoundingBox"
          width="1"
          height="1"
        >
          <use
            xlinkHref={`#dragon-${id}`}
            transform="scale(0.00229)"
          />
        </pattern>
        <ProgressiveImage
          src={url}
          placeholder={url}
        >
          {(src: string) => (
            <image
              id={`dragon-${id}`}
              xlinkHref={loadError ? EMPTY : src}
              color={color}
              onError={() => setLoadError(true)}
            />
          )}
        </ProgressiveImage>
      </defs>
    </svg>
  );
};
